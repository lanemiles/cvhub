<html>
	<head>

		<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
		<link rel='stylesheet' href='http://40.83.184.46/static/cvhub_app/resume-pdf-css.css' />
		<script src="https://cdnjs.cloudflare.com/ajax/libs/tinysort/2.2.2/tinysort.js"></script>

	</head>

	<body>

		<div id='container'>


			<h1 class='title small_caps'>{{user_info.display_name}}</h1>

			<div class='contact' id=0>
				<span class='email'>{{user.email}}</span>
				<span class='divider_pipe'> | </span>
				<span class='phone'>{{user_info.phone_number|slice:":3"}}-{{user_info.phone_number|slice:"3:6"}}-{{user_info.phone_number|slice:"6:"}}</span>
				<span class='divider_pipe'> | </span>
				<span class='url'>{{user_info.website}}</span>
			</div>

			<!-- <div class='summary'>
				<span class='summary_text italics'>
					A fast-learning and self-motivated student leader passionate about computer science, politics, and their intersections
				</span>
			</div> -->

			{% if education_list %}
			<div class='section' id={{user_info.education_order}}>

				<span class='section_name small_caps bold'>EDUCATION:</span>

				<hr class='section_hr'>

				{% for info in education_list %}
				{% if info.enabled == True %}

				<div class='item'>

					<div class='main_row'>

						<span class='row_left'>

						<span class='item_title bold'>{{info.school}}</span>, <span class='item_sub_title'>{{info.location}}</span>

						</span>

						<span class='row_right'>

						{% if info.in_progress %}
						<span class='item_date italics'>Expected Graduation: {{info.end_date}}</span>
						{% else %}
						<span class='item_date italics'>{{info.start_date}} - {{info.end_date}}</span>
						{% endif %}
						</span>

					</div>

					<div class='row_clear'></div>

					<div class='bullet_points'>

						<ul class='bullet_point_ul'>

							{% for key, value in bps.items %}
							{% if key == info %}
							{% for text in value %}

							<li class='bullet_point_li'><span class='bullet_point_item' database_id={{text.pk}}>
							{{text.text}}
							</span></li>

							{% endfor %}
							{% endif %}
							{% endfor %}

							
							

						</ul>

					</div>

				</div>

				{% endif %}
				{% endfor %}

			</div>
			{% endif %}

			{% if skill_category_list %}
			<div class='section' id={{user_info.skill_order}}>

				<span class='section_name small_caps bold'>SKILLS:</span>

				<hr class='section_hr'>

				{% for info in skill_category_list %}
				{% if info.enabled == True %}

				<div class='item'>

					<div class='main_row'>

						<span class='row_left'>

						<span class='item_title bold'>{{info.category}}</span>

						</span>

						<span class='row_right'>

						
						</span>

					</div>

					<div class='row_clear'></div>

					<div class='bullet_points'>

						<ul class='bullet_point_ul'>

							{% for key, value in bps.items %}
							{% if key == info %}
							{% for text in value %}

							<li class='bullet_point_li'><span class='bullet_point_item' database_id={{text.pk}}>
							{{text.text}}
							</span></li>

							{% endfor %}
							{% endif %}
							{% endfor %}

							
							

						</ul>

					</div>

				</div>

				{% endif %}
				{% endfor %}

			</div>
			{% endif %}

			{% if experience_list %}
			<div class='section' id={{user_info.experience_order}}>

				<span class='section_name small_caps bold'>EXPERIENCE:</span>

				<hr class='section_hr'>

				{% for info in experience_list %}
				{% if info.enabled == True %}

				<div class='item'>

					<div class='main_row'>

						<span class='row_left'>

						<span class='item_title bold'>{{info.employer}}</span>, <span class='item_sub_title'>{{info.title}}</span>

						</span>

						<span class='row_right'>

						{% if info.current %}
						<span class='item_date italics'>{{info.start_date}} - Present</span>
						{% else %}
						<span class='item_date italics'>{{info.start_date}} - {{info.end_date}}</span>
						{% endif %}
						</span>

					</div>

					<div class='row_clear'></div>

					<div class='bullet_points'>

						<ul class='bullet_point_ul'>

							{% for key, value in bps.items %}
							{% if key == info %}
							{% for text in value %}

							<li class='bullet_point_li'><span class='bullet_point_item' database_id={{text.pk}} id={{text.pk}}>
							{{text.text}}
							</span></li>

							{% endfor %}
							{% endif %}
							{% endfor %}

							
							

						</ul>

					</div>

				</div>

				{% endif %}
				{% endfor %}

			</div>
			{% endif %}

			{% if award_list %}
			<div class='section' id={{user_info.award_order}}>

				<span class='section_name small_caps bold'>AWARDS:</span>

				<hr class='section_hr'>

				{% for info in award_list %}
				{% if info.enabled == True %}

				<div class='item'>

					<div class='main_row'>

						<span class='row_left'>

						<span class='item_title bold'>{{info.name}}</span>, <span class='item_sub_title'>{{info.issuer}}</span>

						</span>

						<span class='row_right'>

						
						<span class='item_date italics'>{{info.date_awarded}}</span>
						</span>

					</div>

					<div class='row_clear'></div>

					<div class='bullet_points'>

						<ul class='bullet_point_ul'>

							{% for key, value in bps.items %}
							{% if key == info %}
							{% for text in value %}

							<li class='bullet_point_li'><span class='bullet_point_item' database_id={{text.pk}} id={{text.pk}}>
							{{text.text}}
							</span></li>

							{% endfor %}
							{% endif %}
							{% endfor %}

							
							

						</ul>

					</div>

				</div>

				{% endif %}
				{% endfor %}

			</div>
			{% endif %}



		</div>

		<script type='text/javascript'>
		tinysort('#container > div',{attr: 'id'})
		</script>

		<script type="text/javascript">/*
    A simple jQuery modal (http://github.com/kylefox/jquery-modal)
    Version 0.6.0
*/
!function(o){var t=null;o.modal=function(e,i){o.modal.close();var s,l;if(this.$body=o("body"),this.options=o.extend({},o.modal.defaults,i),this.options.doFade=!isNaN(parseInt(this.options.fadeDuration,10)),e.is("a"))if(l=e.attr("href"),/^#/.test(l)){if(this.$elm=o(l),1!==this.$elm.length)return null;this.$body.append(this.$elm),this.open()}else this.$elm=o("<div>"),this.$body.append(this.$elm),s=function(o,t){t.elm.remove()},this.showSpinner(),e.trigger(o.modal.AJAX_SEND),o.get(l).done(function(i){t&&(e.trigger(o.modal.AJAX_SUCCESS),t.$elm.empty().append(i).on(o.modal.CLOSE,s),t.hideSpinner(),t.open(),e.trigger(o.modal.AJAX_COMPLETE))}).fail(function(){e.trigger(o.modal.AJAX_FAIL),t.hideSpinner(),e.trigger(o.modal.AJAX_COMPLETE)});else this.$elm=e,this.$body.append(this.$elm),this.open()},o.modal.prototype={constructor:o.modal,open:function(){var t=this;this.options.doFade?(this.block(),setTimeout(function(){t.show()},this.options.fadeDuration*this.options.fadeDelay)):(this.block(),this.show()),this.options.escapeClose&&o(document).on("keydown.modal",function(t){27==t.which&&o.modal.close()}),this.options.clickClose&&this.blocker.click(function(t){t.target==this&&o.modal.close()})},close:function(){this.unblock(),this.hide(),o(document).off("keydown.modal")},block:function(){this.$elm.trigger(o.modal.BEFORE_BLOCK,[this._ctx()]),this.blocker=o('<div class="jquery-modal blocker"></div>'),this.$body.css("overflow","hidden"),this.$body.append(this.blocker),this.options.doFade&&this.blocker.css("opacity",0).animate({opacity:1},this.options.fadeDuration),this.$elm.trigger(o.modal.BLOCK,[this._ctx()])},unblock:function(){if(this.options.doFade){var o=this;this.blocker.fadeOut(this.options.fadeDuration,function(){o.blocker.children().appendTo(o.$body),o.blocker.remove(),o.$body.css("overflow","")})}else this.blocker.children().appendTo(this.$body),this.blocker.remove(),this.$body.css("overflow","")},show:function(){this.$elm.trigger(o.modal.BEFORE_OPEN,[this._ctx()]),this.options.showClose&&(this.closeButton=o('<a href="#close-modal" rel="modal:close" class="close-modal '+this.options.closeClass+'">'+this.options.closeText+"</a>"),this.$elm.append(this.closeButton)),this.$elm.addClass(this.options.modalClass+" current"),this.$elm.appendTo(this.blocker),this.options.doFade?this.$elm.css("opacity",0).animate({opacity:1},this.options.fadeDuration):this.$elm.show(),this.$elm.trigger(o.modal.OPEN,[this._ctx()])},hide:function(){this.$elm.trigger(o.modal.BEFORE_CLOSE,[this._ctx()]),this.closeButton&&this.closeButton.remove(),this.$elm.removeClass("current");var t=this;this.options.doFade?this.$elm.fadeOut(this.options.fadeDuration,function(){t.$elm.trigger(o.modal.AFTER_CLOSE,[t._ctx()])}):this.$elm.hide(0,function(){t.$elm.trigger(o.modal.AFTER_CLOSE,[t._ctx()])}),this.$elm.trigger(o.modal.CLOSE,[this._ctx()])},showSpinner:function(){this.options.showSpinner&&(this.spinner=this.spinner||o('<div class="'+this.options.modalClass+'-spinner"></div>').append(this.options.spinnerHtml),this.$body.append(this.spinner),this.spinner.show())},hideSpinner:function(){this.spinner&&this.spinner.remove()},_ctx:function(){return{elm:this.$elm,blocker:this.blocker,options:this.options}}},o.modal.close=function(o){if(t){o&&o.preventDefault(),t.close();var e=t.$elm;return t=null,e}},o.modal.isActive=function(){return t?!0:!1},o.modal.defaults={escapeClose:!0,clickClose:!0,closeText:"Close",closeClass:"",modalClass:"modal",spinnerHtml:null,showSpinner:!0,showClose:!0,fadeDuration:null,fadeDelay:1},o.modal.BEFORE_BLOCK="modal:before-block",o.modal.BLOCK="modal:block",o.modal.BEFORE_OPEN="modal:before-open",o.modal.OPEN="modal:open",o.modal.BEFORE_CLOSE="modal:before-close",o.modal.CLOSE="modal:close",o.modal.AFTER_CLOSE="modal:after-close",o.modal.AJAX_SEND="modal:ajax:send",o.modal.AJAX_SUCCESS="modal:ajax:success",o.modal.AJAX_FAIL="modal:ajax:fail",o.modal.AJAX_COMPLETE="modal:ajax:complete",o.fn.modal=function(e){return 1===this.length&&(t=new o.modal(this,e)),this},o(document).on("click.modal",'a[rel="modal:close"]',o.modal.close),o(document).on("click.modal",'a[rel="modal:open"]',function(t){t.preventDefault(),o(this).modal()})}(jQuery);</script>

  <!-- Modal HTML embedded directly into document -->
  <div id="ex1" style="display:none;">
  <h2 class='comment_header'>Comment on:</h2> <blockquote id='bp_text'></blockquote>
  <h2 class='comment_header'>Previous Comments:</h3>
  <div id='results'>
  </div>
  <h2 class='comment_header'>Add a Comment:</h2>
  <div id='new_comment'>
  <form id='add_comment' method='POST'>
  <label>Comment: </label><input style='width: 300px;' id='comment_text' type='text' name='comment_text' placeholder='Your thoughts...'><br>
  <label>Suggestion: </label><input style='width: 300px;' id='suggestion_text' type='text' name='suggestion_text' placeholder='(Optional) What would you replace it with?'><br>
  {% csrf_token %}
  <input type='button' id='submit_button' value='Submit'>
  </form>
  </div>
  </div>

  <!-- Link to open the modal -->
  <p><a id='key' href="#ex1" rel="modal:open" style='display:none'>Open Modal</a></p>
  <a href="#close" id ='close_key' rel="modal:close" style='display: none;'>Close window</a>

	<script type="text/javascript">

	$( "#submit_button" ).click(function( e ) {

			
			e.preventDefault()
			var url = $("#add_comment").attr('action');


			var comment_text = $("#comment_text").val()
			var suggestion_text = $("#suggestion_text").val()


		    var csrftoken = getCookie('csrftoken');


			$.post(url, {comment_text: comment_text, suggestion_text: suggestion_text, csrfmiddlewaretoken: csrftoken}, function() {

			var comment_text = $("#comment_text").val('')
			var suggestion_text = $("#suggestion_text").val('')




			update_modal()

			});



			

			

				    });


			function getCookie(name) {
			    var cookieValue = null;
			    if (document.cookie && document.cookie != '') {
			        var cookies = document.cookie.split(';');
			        for (var i = 0; i < cookies.length; i++) {
			            var cookie = jQuery.trim(cookies[i]);
			            // Does this cookie string begin with the name we want?
			            if (cookie.substring(0, name.length + 1) == (name + '=')) {
			                cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
			                break;
			            }
			        }
			    }
			    return cookieValue;
			}



	$('#results').click(function (e){

			console.log("A CLICK")
			console.log(e) 

				e.preventDefault()
			     e.stopImmediatePropagation()
			      var url = $(e.target).attr('href');
				   $.get(url, function(data) {
				   	
				   	update_modal()
			

				    });

		 });


	function update_modal() {
		$("#results").html('')
		    the_id = window.bullet_id
		    url = "/get-comments-for-bp/".concat(the_id)
		    $("#add_comment").attr("action", "/add-bp-comment/".concat(the_id))
		    $.get(url, function( data ) {

		    	$("#bp_text").html(data['bp_info'])


			 $.each(data['comments'], function(index, value) {

			 	console.log(value)


			 	if (value[0][3] == true) {

			 		if (value[0][5] == 1) {

			 			$("#results").append("<div class='result_block' style='color: gray;'><div class='column-left'>Score: " + value[0][2] + " | <span>Approved</span></div><div class='column-right'></div><div class='column-center'><b>Suggestion: </b><br>" + (value[0][4]) + "<br><br><b>Comment: </b><br>" + (value[0][1]) + "</div></div><hr>")

			 		}

			 		else if (value[0][5] == 2) {

			 			$("#results").append("<div class='result_block' style='color: gray;'><div class='column-left'>Score: " + value[0][2] + " | <span>Rejected</span></div><div class='column-right'></div><div class='column-center'><b>Suggestion: </b><br>" + (value[0][4]) + "<br><br><b>Comment: </b><br>" + (value[0][1]) + "</div></div><hr>")
			 		}

			 		else {


			 			if (value[1] == 2) {
			 		$("#results").append("<div class='result_block'><div class='column-left'>Score: " + value[0][2] + " | <a href='/upvote-comment/" + value[0][0] + "'>+1</a> | <a href='/downvote-comment/" + value[0][0] + "'>-1</a></div><div class='column-right'></div><div class='column-center'><b>Suggestion: </b><br>" + (value[0][4]) + "<br><br><b>Comment: </b><br>" + (value[0][1]) + "</div></div><hr>")
				 	} else if(value[1] == 0) {
				 		$("#results").append("<div class='result_block' style='color: gray;'><div class='column-left'>Score: " + value[0][2] + " | <span>You +1'd</span></div><div class='column-right'></div><div class='column-center'><b>Suggestion: </b><br>" + (value[0][4]) + "<br><br><b>Comment: </b><br>" + (value[0][1]) + "</div></div><hr>")
				 	} else if(value[1] == 1){
				 		$("#results").append("<div class='result_block' style='color: gray'><div class='column-left'>Score: " + value[0][2] + " | <span>You -1'd</span></div><div class='column-right'></div><div class='column-center'><b>Suggestion: </b><br>" + (value[0][4]) + "<br><br><b>Comment: </b><br>" + (value[0][1]) + "</div></div><hr>")


			 		}

			 		
			 	}


			 	} 


			 	else {

			 		if (value[0][5] == 1) {

			 			$("#results").append("<div class='result_block' style='color: gray'><div class='column-left'>Score: " + value[0][2] + " | <span>Approved</span></div><div class='column-right'></div><div class='column-center'>" + (value[0][1]) + "</div></div><hr>")

			 		}

			 		else if (value[0][5] == 2) {

			 			$("#results").append("<div class='result_block'><div class='column-left'>Score: " + value[0][2] + " | <span style='color: gray;'>Rejected</span></div><div class='column-right'></div><div class='column-center'>" + (value[0][1]) + "</div></div><hr>")
			 		}

			 		else {


			 		
			 		if (value[1] == 2) {
			 		$("#results").append("<div class='result_block'><div class='column-left'>Score: " + value[0][2] + " | <a href='/upvote-comment/" + value[0][0] + "'>+1</a> | <a href='/downvote-comment/" + value[0][0] + "'>-1</a></div><div class='column-right'></div><div class='column-center'>" + (value[0][1]) + "</div></div><hr>")
			 	} else if(value[1] == 0) {
			 		$("#results").append("<div class='result_block' style='color: gray;'><div class='column-left'>Score: " + value[0][2] + " | <span>You +1'd</span></div><div class='column-right'></div><div class='column-center'>" + (value[0][1]) + "</div></div><hr>")
			 	} else if(value[1] == 1){
			 		$("#results").append("<div class='result_block' style='color: gray;'><div class='column-left'>Score: " + value[0][2] + " | <span>You -1'd</span></div><div class='column-right'></div><div class='column-center'>" + (value[0][1]) + "</div></div><hr>")
			 	}

			 	}

			 }

			 	

			 	



			 });
			

			});
			$("#key").click()
	}

			



		$("#container li").click(function (e) {
			window.bullet_id = $(e.target).attr("database_id");
			update_modal()
		});

		


	</script>	
	</body>

</html>